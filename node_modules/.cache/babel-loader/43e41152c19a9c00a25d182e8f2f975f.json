{"ast":null,"code":"import clamp from 'lodash-es/clamp';\nimport { eventScope, getPosition } from '../utils/';\nexport function selectHandler(scrollbar) {\n  var addEvent = eventScope(scrollbar);\n  var containerEl = scrollbar.containerEl,\n      contentEl = scrollbar.contentEl;\n  var isSelected = false;\n  var animationID;\n\n  function scroll(_a) {\n    var x = _a.x,\n        y = _a.y;\n    if (!x && !y) return;\n    var offset = scrollbar.offset,\n        limit = scrollbar.limit; // DISALLOW delta transformation\n\n    scrollbar.setMomentum(clamp(offset.x + x, 0, limit.x) - offset.x, clamp(offset.y + y, 0, limit.y) - offset.y);\n    animationID = requestAnimationFrame(function () {\n      scroll({\n        x: x,\n        y: y\n      });\n    });\n  }\n\n  addEvent(window, 'mousemove', function (evt) {\n    if (!isSelected) return;\n    cancelAnimationFrame(animationID);\n    var dir = calcMomentum(scrollbar, evt);\n    scroll(dir);\n  });\n  addEvent(contentEl, 'selectstart', function (evt) {\n    evt.stopPropagation();\n    cancelAnimationFrame(animationID);\n    isSelected = true;\n  });\n  addEvent(window, 'mouseup blur', function () {\n    cancelAnimationFrame(animationID);\n    isSelected = false;\n  }); // patch for touch devices\n\n  addEvent(containerEl, 'scroll', function (evt) {\n    evt.preventDefault();\n    containerEl.scrollTop = containerEl.scrollLeft = 0;\n  });\n}\n\nfunction calcMomentum(scrollbar, evt) {\n  var _a = scrollbar.bounding,\n      top = _a.top,\n      right = _a.right,\n      bottom = _a.bottom,\n      left = _a.left;\n\n  var _b = getPosition(evt),\n      x = _b.x,\n      y = _b.y;\n\n  var res = {\n    x: 0,\n    y: 0\n  };\n  var padding = 20;\n  if (x === 0 && y === 0) return res;\n\n  if (x > right - padding) {\n    res.x = x - right + padding;\n  } else if (x < left + padding) {\n    res.x = x - left - padding;\n  }\n\n  if (y > bottom - padding) {\n    res.y = y - bottom + padding;\n  } else if (y < top + padding) {\n    res.y = y - top - padding;\n  }\n\n  res.x *= 2;\n  res.y *= 2;\n  return res;\n}","map":{"version":3,"sources":["../src/events/select.ts"],"names":[],"mappings":"AAAA,OAAO,KAAP,MAAkB,iBAAlB;AAGA,SACE,UADF,EAEE,WAFF,QAGO,WAHP;AAKA,OAAM,SAAU,aAAV,CAAwB,SAAxB,EAA8C;AAClD,MAAM,QAAQ,GAAG,UAAU,CAAC,SAAD,CAA3B;AACQ,MAAA,WAAA,GAAA,SAAA,CAAA,WAAA;AAAA,MAAa,SAAA,GAAA,SAAA,CAAA,SAAb;AAER,MAAI,UAAU,GAAG,KAAjB;AACA,MAAI,WAAJ;;AAEA,WAAS,MAAT,CAAgB,EAAhB,EAAwB;QAAN,CAAA,GAAA,EAAA,CAAA,C;QAAG,CAAA,GAAA,EAAA,CAAA,C;AACnB,QAAI,CAAC,CAAD,IAAM,CAAC,CAAX,EAAc;AAEN,QAAA,MAAA,GAAA,SAAA,CAAA,MAAA;AAAA,QAAQ,KAAA,GAAA,SAAA,CAAA,KAAR,CAHc,CAItB;;AACA,IAAA,SAAS,CAAC,WAAV,CACE,KAAK,CAAC,MAAM,CAAC,CAAP,GAAW,CAAZ,EAAe,CAAf,EAAkB,KAAK,CAAC,CAAxB,CAAL,GAAkC,MAAM,CAAC,CAD3C,EAEE,KAAK,CAAC,MAAM,CAAC,CAAP,GAAW,CAAZ,EAAe,CAAf,EAAkB,KAAK,CAAC,CAAxB,CAAL,GAAkC,MAAM,CAAC,CAF3C;AAKA,IAAA,WAAW,GAAG,qBAAqB,CAAC,YAAA;AAClC,MAAA,MAAM,CAAC;AAAE,QAAA,CAAC,EAAA,CAAH;AAAK,QAAA,CAAC,EAAA;AAAN,OAAD,CAAN;AACD,KAFkC,CAAnC;AAGD;;AAED,EAAA,QAAQ,CAAC,MAAD,EAAS,WAAT,EAAsB,UAAC,GAAD,EAAgB;AAC5C,QAAI,CAAC,UAAL,EAAiB;AAEjB,IAAA,oBAAoB,CAAC,WAAD,CAApB;AAEA,QAAM,GAAG,GAAG,YAAY,CAAC,SAAD,EAAY,GAAZ,CAAxB;AAEA,IAAA,MAAM,CAAC,GAAD,CAAN;AACD,GARO,CAAR;AAUA,EAAA,QAAQ,CAAC,SAAD,EAAY,aAAZ,EAA2B,UAAC,GAAD,EAAW;AAC5C,IAAA,GAAG,CAAC,eAAJ;AACA,IAAA,oBAAoB,CAAC,WAAD,CAApB;AAEA,IAAA,UAAU,GAAG,IAAb;AACD,GALO,CAAR;AAOA,EAAA,QAAQ,CAAC,MAAD,EAAS,cAAT,EAAyB,YAAA;AAC/B,IAAA,oBAAoB,CAAC,WAAD,CAApB;AAEA,IAAA,UAAU,GAAG,KAAb;AACD,GAJO,CAAR,CAvCkD,CA6ClD;;AACA,EAAA,QAAQ,CAAC,WAAD,EAAc,QAAd,EAAwB,UAAC,GAAD,EAAW;AACzC,IAAA,GAAG,CAAC,cAAJ;AACA,IAAA,WAAW,CAAC,SAAZ,GAAwB,WAAW,CAAC,UAAZ,GAAyB,CAAjD;AACD,GAHO,CAAR;AAID;;AAED,SAAS,YAAT,CACE,SADF,EAEE,GAFF,EAEiB;AAET,MAAA,EAAA,GAAA,SAAA,CAAA,QAAA;AAAA,MAAE,GAAA,GAAA,EAAA,CAAA,GAAF;AAAA,MAAO,KAAA,GAAA,EAAA,CAAA,KAAP;AAAA,MAAc,MAAA,GAAA,EAAA,CAAA,MAAd;AAAA,MAAsB,IAAA,GAAA,EAAA,CAAA,IAAtB;;AACA,MAAA,EAAA,GAAA,WAAA,CAAA,GAAA,CAAA;AAAA,MAAE,CAAA,GAAA,EAAA,CAAA,CAAF;AAAA,MAAK,CAAA,GAAA,EAAA,CAAA,CAAL;;AAEN,MAAM,GAAG,GAAG;AACV,IAAA,CAAC,EAAE,CADO;AAEV,IAAA,CAAC,EAAE;AAFO,GAAZ;AAKA,MAAM,OAAO,GAAG,EAAhB;AAEA,MAAI,CAAC,KAAK,CAAN,IAAW,CAAC,KAAK,CAArB,EAAwB,OAAO,GAAP;;AAExB,MAAI,CAAC,GAAG,KAAK,GAAG,OAAhB,EAAyB;AACvB,IAAA,GAAG,CAAC,CAAJ,GAAS,CAAC,GAAG,KAAJ,GAAY,OAArB;AACD,GAFD,MAEO,IAAI,CAAC,GAAG,IAAI,GAAG,OAAf,EAAwB;AAC7B,IAAA,GAAG,CAAC,CAAJ,GAAS,CAAC,GAAG,IAAJ,GAAW,OAApB;AACD;;AAED,MAAI,CAAC,GAAG,MAAM,GAAG,OAAjB,EAA0B;AACxB,IAAA,GAAG,CAAC,CAAJ,GAAS,CAAC,GAAG,MAAJ,GAAa,OAAtB;AACD,GAFD,MAEO,IAAI,CAAC,GAAG,GAAG,GAAG,OAAd,EAAuB;AAC5B,IAAA,GAAG,CAAC,CAAJ,GAAS,CAAC,GAAG,GAAJ,GAAU,OAAnB;AACD;;AAED,EAAA,GAAG,CAAC,CAAJ,IAAS,CAAT;AACA,EAAA,GAAG,CAAC,CAAJ,IAAS,CAAT;AAEA,SAAO,GAAP;AACD","sourceRoot":"","sourcesContent":["import clamp from 'lodash-es/clamp';\nimport { eventScope, getPosition, } from '../utils/';\nexport function selectHandler(scrollbar) {\n    var addEvent = eventScope(scrollbar);\n    var containerEl = scrollbar.containerEl, contentEl = scrollbar.contentEl;\n    var isSelected = false;\n    var animationID;\n    function scroll(_a) {\n        var x = _a.x, y = _a.y;\n        if (!x && !y)\n            return;\n        var offset = scrollbar.offset, limit = scrollbar.limit;\n        // DISALLOW delta transformation\n        scrollbar.setMomentum(clamp(offset.x + x, 0, limit.x) - offset.x, clamp(offset.y + y, 0, limit.y) - offset.y);\n        animationID = requestAnimationFrame(function () {\n            scroll({ x: x, y: y });\n        });\n    }\n    addEvent(window, 'mousemove', function (evt) {\n        if (!isSelected)\n            return;\n        cancelAnimationFrame(animationID);\n        var dir = calcMomentum(scrollbar, evt);\n        scroll(dir);\n    });\n    addEvent(contentEl, 'selectstart', function (evt) {\n        evt.stopPropagation();\n        cancelAnimationFrame(animationID);\n        isSelected = true;\n    });\n    addEvent(window, 'mouseup blur', function () {\n        cancelAnimationFrame(animationID);\n        isSelected = false;\n    });\n    // patch for touch devices\n    addEvent(containerEl, 'scroll', function (evt) {\n        evt.preventDefault();\n        containerEl.scrollTop = containerEl.scrollLeft = 0;\n    });\n}\nfunction calcMomentum(scrollbar, evt) {\n    var _a = scrollbar.bounding, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left;\n    var _b = getPosition(evt), x = _b.x, y = _b.y;\n    var res = {\n        x: 0,\n        y: 0,\n    };\n    var padding = 20;\n    if (x === 0 && y === 0)\n        return res;\n    if (x > right - padding) {\n        res.x = (x - right + padding);\n    }\n    else if (x < left + padding) {\n        res.x = (x - left - padding);\n    }\n    if (y > bottom - padding) {\n        res.y = (y - bottom + padding);\n    }\n    else if (y < top + padding) {\n        res.y = (y - top - padding);\n    }\n    res.x *= 2;\n    res.y *= 2;\n    return res;\n}\n//# sourceMappingURL=select.js.map"]},"metadata":{},"sourceType":"module"}